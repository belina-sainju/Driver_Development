#pragma once
/*
 * mb85rs256.h
 *
 *  Created on: Jan 21, 2025
 *      Author: Belina Sainju
 */

#include <stdbool.h>
#include <stdio.h>
#include <stdint.h>

#define BITS_PER_BYTE 8

// FRAM ID
#define FRAM_ID 0x047F2503 // Manuf ID, Continuation code, Product ID

// FRAM size is 256Kbit
#define FRAM_SIZE_IN_BITS 262144

// FRAM size is 256Kbit = 32,768bytes ~ 32KB
#define FRAM_SIZE_IN_BYTES FRAM_SIZE_IN_BITS / BITS_PER_BYTE

// =============================================================================================#=
// Public API Functions
// =============================================================================================#=

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~+~
// One-time startup initialization for the MX25V1635F FRAM
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~+~
bool MB85RS256_Init(void);

// =============================================================================================#=
// Read FRAM device ID
// =============================================================================================#=
bool MB85RS256_RDID(uint32_t *identification);

// =============================================================================================#=
// Set FRAM Write Enable Latch
// =============================================================================================#=
bool MB85RS256_WREN(void);

// =============================================================================================#=
// Reset FRAM Write Enable Latch
// =============================================================================================#=
bool MB85RS256_WRDI(void);

// =============================================================================================#=
// Read FRAM Status Register
// =============================================================================================#=
bool MB85RS256_RDSR(uint8_t *statusRegValue);

// =============================================================================================#=
// Write to FRAM memory
// =============================================================================================#=
bool MB85RS256_Write(uint16_t writeAddress, uint8_t *dataToWrite, uint16_t lengthToSend);

// =============================================================================================#=
// Read FRAM memory
// =============================================================================================#=
bool MB85RS256_Read(uint16_t readAddress, uint8_t *dataReceived, uint16_t lengthToReceive);
